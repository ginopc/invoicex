/** * Invoicex * Copyright (c) 2005-2016 Marco Ceccarelli, Tnx srl * * Questo software Ã¨ soggetto, e deve essere distribuito con la licenza   * GNU General Public License, Version 2. La licenza accompagna il software * o potete trovarne una copia alla Free Software Foundation http://www.fsf.org . * * This software is subject to, and may be distributed under, the * GNU General Public License, Version 2. The license should have * accompanied the software or you may obtain a copy of the license * from the Free Software Foundation at http://www.fsf.org . *  * -- * Marco Ceccarelli (m.ceccarelli@tnx.it) * Tnx snc (http://www.tnx.it) * */package gestioneFatture;import it.tnx.Db;import it.tnx.commons.DbUtils;import it.tnx.commons.SystemUtils;import java.sql.Connection;import java.util.HashMap;import java.util.Map;public class Storico {    private static void aggiungidatiextra(Map m) {        m.put("hostname", SystemUtils.getHostname());        m.put("login_so", main.login);        m.put("username_id", main.utente.getIdUtente());        m.put("username", main.utente.getNomeUtente());    }    public Storico() {    }    public static void scrivi(String titolo, String nota) {        scrivi(Db.getConn(), titolo, nota);    }    public static void scrivi(Connection conn, String titolo, String nota) {        try {            String note = titolo + "|" + nota;            //            String sql = "";//            sql += "insert into storico (nota) values (" + Db.pc(note, java.sql.Types.VARCHAR) + ")";//            Db.executeSql(conn, sql);                        Map m = new HashMap();            m.put("nota", note);            aggiungidatiextra(m);            String sql = "insert into storico set " + DbUtils.prepareSqlFromMap(m);            System.out.println("sql = " + sql);            Db.executeSql(conn, sql);                        System.out.println("storico:" + titolo);        } catch (Exception e) {            System.err.println("errore durante la scrittura dello storico: " + e.getMessage());        }    }        public static void scriviSeparati(String titolo, String nota) {        scriviSeparati(Db.getConn(), titolo, nota);    }    public static void scriviSeparati(Connection conn, String titolo, String nota) {        try {//            String sql = "";//            sql += "insert into storico (nota,dati) values (" + Db.pcs(titolo) + "," + Db.pcs(nota) + ")";//            Db.executeSql(conn, sql);                        Map m = new HashMap();            m.put("nota", titolo);            m.put("dati", nota);            aggiungidatiextra(m);            String sql = "insert into storico set " + DbUtils.prepareSqlFromMap(m);            System.out.println("sql = " + sql);            Db.executeSql(conn, sql);                        System.out.println("scriviSeparati:" + titolo);        } catch (Exception e) {            System.err.println("errore durante la scrittura dello scriviSeparati: " + e.getMessage());        }    }    }